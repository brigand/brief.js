/* brief.js | Copyright 2014 Jeffrey E. Shaver II | Released under the MIT license | https://github.com/jeffshaver/brief.js/blob/master/LICENSE */
(function(g,f){"function"===typeof define&&define.amd?define([],f):"object"===typeof exports?module.exports=f():g.brief=f(document,Element,Array)})(this,function(g,f,e){var u={};e=e.prototype;var t=f.prototype,r=e.slice,w=e.splice;f=e.forEach;var s=e.push,x=e.pop,y=e.filter,v=t.matchesSelector||t.msMatchesSelector||t.mozMatchesSelector||t.webkitMatchesSelector||t.oMatchesSelector,z=/^#[\w\d]*$/,A=/^\.[\w\d]*$/,B=/^[\w\d]*$/,d=function(b,a){return new d.prototype.create(b,a)};d.prototype={on:function(){var b=d(),a=arguments[0],c=0,n=a.length;if(a.isBrief||"object"==typeof a)for(;c<n;c++)b.push(a[c]);else b.push(arguments[0]);a=[].slice.call(arguments,1);d.fn.on.apply(b,a)},off:function(){var b=d(),a=arguments[0],c=0,n=a.length;if(a.isBrief||"object"==typeof a)for(;c<n;c++)b.push(a[c]);else b.push(arguments[0]);a=[].slice.call(arguments,1);d.fn.off.apply(b,a)},once:function(){var b=d(),a=arguments[0],c=0,n=a.length;if(a.isBrief||"object"==typeof a)for(;c<n;c++)b.push(a[c]);else b.push(arguments[0]);a=[].slice.call(arguments,1);d.fn.once.apply(b,a)}};e=d.prototype.create=function(b,a){var c;if(b||a){if("string"==typeof a||!a&&b)this.selector=a||b,c=z.test(this.selector)?[g.getElementById(this.selector.substring(1))]:A.test(this.selector)?g.getElementsByClassName(this.selector.substring(1)):B.test(this.selector)?g.getElementsByTagName(this.selector):g.querySelectorAll(this.selector),s.apply(this,r.call(c,0));this.selector==a?this.find(b):a&&a.isBrief?s.apply(this,a.find(b)):"object"==typeof a&&(s.apply(this,a.length?a:[a]),this.find(b))}return this};e.prototype={length:0,isBrief:!0,splice:function(){w.apply(this,r.call(arguments,0));return this},push:function(){s.apply(this,r.call(arguments,0));return this},pop:function(){x.apply(this);return this},toArray:function(){return r.call(this,0)},empty:function(){for(;0<this.length;)this.pop();return this},filter:function(b){var a=y.call(this,function(a){return v.call(a,b)});a.selector=this.selector;return a},indexOf:function(b){for(var a=0;a<this.length;a++)if(v.call(this[a],b))return a;return-1},get:function(b){return this[b]},find:function(b){for(var a=d(),c=this.length,n=0;n<c;n++)s.apply(a,r.call(item.querySelectorAll(b),0));a.selector=this.selctor;return a},getChildren:function(){for(var b=d(),a=0;a<this.length;a++)s.apply(b,this[a].children);return b},forEach:f,on:function(b,a,c,d){var k=a,e=this,f=e.length,p=0,q=b.length,l,h,m,g;"boolean"==typeof c&&(d=c,c=void 0);"string"==typeof b&&(b=b.split(" "),q=b.length);for(d&&(k=function(c){e.off(b,k,!1);a.call(this,c)});p<q;p++)for(m=0,h=b[p],u[h]||(u[h]=[]);m<f;m++)l=e[m],c?(g=u[h],k=function(b){v.call(b.srcElement,c)&&(d&&e.off(h,a,c),a.call(this,b))},k._element=l,k._delegatedTo=c,k._originalCallback=a,g[g.length]=k,l.addEventListener(h,k,!0)):l.addEventListener(h,k,!1)},off:function(b,a,c){var d=0,e=b.length,g=this.length,f,p,q,l,h,m;"string"==typeof b&&(b=b.split(" "),e=b.length);for(;d<e;d++)for(q=0,f=b[d];q<g;q++)if(p=this[q],c)for(h=u[f],l=h.length;l--;)m=h[l],m._element!=p||m._delegatedTo!=c&&"*"!=c||(p.removeEventListener(f,m,!0),h.splice(l,1));else p.removeEventListener(f,a,!1)},once:function(){var b=r.call(arguments,0);b.push(!0);return d.fn.on.apply(this,b)}};d.fn=e.prototype;d.on=d.prototype.on;d.off=d.prototype.off;d.once=d.prototype.once;return d}.bind(this,document,Element,Array));