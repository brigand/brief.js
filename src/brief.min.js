/* brief.js | Copyright 2014 Jeffrey E. Shaver II | Released under the MIT license | https://github.com/jeffshaver/brief.js/blob/master/LICENSE */
(function(r,c){"function"===typeof define&&define.amd?define([],c):"object"===typeof exports?module.exports=c():r.brief=c(document,Element,Array)})(this,function(r,c,d){var q={};d=d.prototype;c=c.prototype;var f=d.slice,t=d.splice,h=d.push,u=d.pop,v=d.filter,s=c.matchesSelector||c.msMatchesSelector||c.mozMatchesSelector||c.webkitMatchesSelector||c.oMatchesSelector,e=function(a,b){return new e.prototype.create(a,b)};e.prototype={length:0,isBrief:!0,splice:function(){t.apply(this,f.call(arguments,0));return this},push:function(){h.apply(this,f.call(arguments,0));return this},removeLast:function(){u.apply(this);return this},toArray:function(){return f.call(this,0)},empty:function(){for(;0<this.length;)this.removeLast();return this},filter:function(a){var b=v.call(this,function(b){return s.call(b,a)});b.selector=this.selector;return b},indexOf:function(a){for(var b=0;b<this.length;b++)if(s.call(this[b],a))return b;return-1},get:function(a){return this[a]},find:function(a){for(var b=e(),w=this.length,c=0;c<w;c++)h.apply(b,f.call(item.querySelectorAll(a),0));b.selector=this.selctor;return b},forEach:d.forEach,on:function(a,b,c,d){var l=b,e=this,f=e.length,n=0,p=a.length,m,g,k,h;"boolean"==typeof c&&(d=c,c=void 0);"string"==typeof a&&(a=a.split(" "),p=a.length);for(d&&(l=function(c){e.off(a,l,!1);b.call(this,c)});n<p;n++)for(k=0,g=a[n],q[g]||(q[g]=[]);k<f;k++)m=e[k],c?(h=q[g],l=function(a){s.call(a.srcElement,c)&&(d&&e.off(g,b,c),b.call(this,a))},l._element=m,l._delegatedTo=c,l._originalCallback=b,h[h.length||0]=l,m.addEventListener(g,l,!0)):m.addEventListener(g,l,!1)},off:function(a,b,c){var d=0,e=a.length,h=this.length,f,n,p,m,g,k;"string"==typeof a&&(a=a.split(" "),e=a.length);for(;d<e;d++)for(p=0,f=a[d];p<h;p++)if(n=this[p],c)for(g=q[f],m=g.length;m--;)k=g[m],k._element!=n||k._delegatedTo!=c&&"*"!=k._delegatedTo||(n.removeEventListener(f,k,!0),g.splice(m,1));else n.removeEventListener(f,b,!1)},once:function(){var a=f.call(arguments,0);a.push(!0);return e.prototype.on.apply(this,a)}};(e.prototype.create=function(a,b){if(a||b){if("string"==typeof b||!b&&a){var c=r.querySelectorAll(this.selector=b||a);h.apply(this,f.call(c,0))}this.selector==b?this.find(a):b&&b.isBrief?h.apply(this,b.find(a)):"object"==typeof b&&(h.apply(this,b.length?b:[b]),this.find(a))}return this}).prototype=e.prototype;return e}.bind(this,document,Element,Array));