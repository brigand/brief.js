/* brief.js | Copyright 2014 Jeffrey E. Shaver II | Released under the MIT license | https://github.com/jeffshaver/brief.js/blob/master/LICENSE */
(function(n,d){"function"===typeof define&&define.amd?define([],d):"object"===typeof exports?module.exports=d():n.brief=d(document,Element,Array)})(this,function(n,d,k){var r=[];k=k.prototype;d=d.prototype;var e=k.slice,u=k.splice,f=k.push,v=k.pop,w=k.filter,p=d.matchesSelector||d.msMatchesSelector||d.mozMatchesSelector||d.webkitMatchesSelector||d.oMatchesSelector,x=/^#[\w\d]*$/,y=/^\.[\w\d]*$/,z=/^[\w\d]*$/,t=function(b){var a;"string"==typeof b&&(a=b.split(" "));return a||e.call(b,0)},s=function(b){var a=c();"string"==typeof b&&(b=c(b));!b.isBrief&&b.length?f.apply(a,b):a.push(b);return a},c=function(b,a){return new c.prototype.create(b,a)};c.prototype={length:0,isBrief:!0,splice:function(){u.apply(this,e.call(arguments,0));return this},push:function(){for(var b=e.call(arguments,0),a=0,g=b.length,h;a<g;a++)h=b[a],h.isBrief?f.apply(this,h.toArray()):h.length?f.apply(this,h):f.call(this,h);return this},pop:function(){v.apply(this);return this},toArray:function(){return e.call(this,0)},empty:function(){for(;0<this.length;)this.pop();return this},filter:function(b){var a=w.call(this,function(a){return p.call(a,b)});a.selector=this.selector;return a},indexOf:function(b){for(var a=0;a<this.length;a++)if(p.call(this[a],b))return a;return-1},get:function(b){return this[b]},find:function(b){for(var a=c(),g=this.length,h=0;h<g;h++)f.apply(a,e.call(item.querySelectorAll(b),0));a.selector=this.selctor;return a},getChildren:function(){for(var b=c(),a=0;a<this.length;a++)f.apply(b,this[a].children);return b},forEach:function(b){for(var a=0,g=this.length;a<g;a++)b(this[a],a,this);return this},on:function(b,a,g,h){var c=a,d=this,e=0,l,q,m,f,k;"boolean"==typeof g&&(h=g,g=void 0);b=t(b);!g&&h&&(c=function(g){d.off(b,c,!1);a.call(this,g)});g&&(c=r[a.__briefId]||function(b){p.call(b.srcElement,g)&&(h&&d.off(q,a,g),a.call(this,b))});for(f=b.length;e<f;e++)for(m=0,q=b[e],k=d.length;m<k;m++)l=d[m],g?(void 0===a.__briefId&&(a.__briefId=r.length,c._instances=[],c._originalCallback=a,r[a.__briefId]=c),c._instances.push({element:l,type:q,delegatedTo:g}),l.addEventListener(q,c,!0)):l.addEventListener(q,c,!1)},off:function(b,a,c){var h=0,d,e,f,l,k,m,n,p;b=t(b);for(n=b.length;h<n;h++)for(f=0,d=b[h],p=this.length;f<p;f++)if(e=this[f],c)for(k=r[a.__briefId],e.removeEventListener(d,k,!0),m=k._instances,l=m.length;l--;)m[l].element==e&&(m[l].type==d&&m[l].delegatedTo==c)&&k._instances.splice(l,1);else e.removeEventListener(d,a,!1)},once:function(){var b=e.call(arguments,0);b.push(!0);return c.prototype.on.apply(this,b)}};(c.prototype.create=function(b,a){var c;if(b||a){if("string"==typeof a||!a&&b)this.selector=a||b,c=x.test(this.selector)?[n.getElementById(this.selector.substring(1))]:y.test(this.selector)?n.getElementsByClassName(this.selector.substring(1)):z.test(this.selector)?n.getElementsByTagName(this.selector):n.querySelectorAll(this.selector),f.apply(this,e.call(c,0));this.selector==a?this.find(b):a&&a.isBrief?f.apply(this,a.find(b)):"object"==typeof a&&(f.apply(this,a.length?a:[a]),this.find(b))}return this}).prototype=c.prototype;c.on=function(){var b=s(arguments[0]),a=e.call(arguments,1);c.prototype.on.apply(b,a)};c.off=function(){var b=s(arguments[0]),a=e.call(arguments,1);c.prototype.off.apply(b,a)};c.once=function(){var b=s(arguments[0]),a=e.call(arguments,1);c.prototype.once.apply(b,a)};return c}.bind(this,document,Element,Array));