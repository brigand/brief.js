var $=function(document,Element,NodeList){var delegatedListeners={};var i=0;var $=function(query){var r=document.querySelectorAll(query);return r.length===1?r[0]:r};Element.prototype.on=function(type,callback,delegatee){type=type.split(" ");type.forEach(function(type){if(!delegatee)this.addEventListener(type,callback,false);else{var elements=$(delegatee),newFunction;if(delegatee.indexOf("#")!==-1)newFunction=function(event){if(event.srcElement.id===delegatee.substring(1))callback(event)};else if(delegatee.indexOf(".")!==-1)newFunction=function(event){if(event.srcElement.classList.contains(delegatee.substring(1)))callback(event)};else newFunction=function(event){if(event.srcElement.tagName.toLowerCase()===delegatee)callback(event)};this.addEventListener(type,newFunction,true);delegatedListeners[i++]={originalCallback:callback,createdCallback:newFunction}}},this);return this};NodeList.prototype.on=function(type,callback,delegatee){[].forEach.call(this,function(element){element.on(type,callback,delegatee)});return this};Element.prototype.off=function(type,callback,delegatee){type=type.split(" ");type.forEach(function(type){if(!delegatee)this.removeEventListener(type,callback,false);else for(var key in delegatedListeners){var obj=delegatedListeners[key];if(obj.originalCallback==callback){this.removeEventListener(type,obj.createdCallback,true);delete delegatedListeners[key];break}}},this);return this};NodeList.prototype.off=function(type,callback,delegatee){[].forEach.call(this,function(element){element.off(type,callback,delegatee)});return this};return $}(document,Element,NodeList);
