/* brief.js | Copyright 2014 Jeffrey E. Shaver II | Released under the MIT license | https://github.com/jeffshaver/brief.js/blob/master/LICENSE */
(function(p,l){"function"===typeof define&&define.amd?define([],l):"object"===typeof exports?module.exports=l():p.brief=l()})(this,function(p,l,t){return function(){var m={},f=t.prototype,n=l.prototype,g=f.slice,u=f.splice,k=f.push,v=f.pop,w=f.filter,q=n.matchesSelector||n.msMatchesSelector||n.mozMatchesSelector||n.webkitMatchesSelector||n.oMatchesSelector,d=function(a,b){return new d.prototype.create(a,b)};d.prototype={length:0,isBrief:!0,splice:function(){u.apply(this,g.call(arguments,0));return this},push:function(){k.apply(this,g.call(arguments,0));return this},pop:function(){v.apply(this);return this},toArray:function(){return g.call(this,0)},empty:function(){for(;0<this.length;)this.pop();return this},filter:function(a){var b=w.call(this,function(b){return q.call(b,a)});this.empty();k.apply(this,b);return this},indexOf:function(a){for(var b=0;b<this.length;b++)if(q.call(this[b],a))return b;return-1},get:function(a){return this[a]},find:function(a){var b=d();this.forEach(function(e){k.apply(b,g.call(e.querySelectorAll(a),0))});return b},forEach:f.forEach,on:function(a,b,e,r){var c=b,d=this;"boolean"==typeof e&&(r=e,e=void 0);"string"==typeof a&&(a=a.split(" "));r&&(c=function(h){d.off(a,c,!1);b.call(this,h)});a.forEach(function(a){m[a]||(m[a]=[]);this.forEach(function(s){e?(c=function(c){q.call(c.srcElement,e)&&(r&&d.off(a,b,e),b.call(this,c))},c._element=s,c._delegatedTo=e,c._originalCallback=b,m[a][m[a].length||0]=c,s.addEventListener(a,c,!0)):s.addEventListener(a,c,!1)})},this)},off:function(a,b,e){var d=0,c,f,h;"string"==typeof a&&(a=a.split(" "));a.forEach(function(a){this.forEach(function(g){if(e)for(c=m[a],f=c.length;d<f;d++)h=c[d],h._element!=g||h._delegatedTo!=e&&"*"!=h._delegatedTo||(g.removeEventListener(a,h,!0),c.splice(d--,1),f=c.length);else g.removeEventListener(a,b,!1)})},this)},once:function(){var a=g.call(arguments,0);a.push(!0);return d.prototype.on.apply(this,a)}};(d.prototype.create=function(a,b){if(a||b){if("string"==typeof b||!b&&a){var d=p.querySelectorAll(this.selector=b||a);k.apply(this,g.call(d,0))}this.selector==b?this.find(a):b&&b.isBrief?k.apply(this,b.find(a)):"object"==typeof b&&(k.apply(this,b.length?b:[b]),this.find(a))}return this}).prototype=d.prototype;return d.bind(p)}}(document,Element,Array));