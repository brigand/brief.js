/* brief.js | Copyright 2014 Jeffrey E. Shaver II | Released under the MIT license | https://github.com/jeffshaver/brief.js/blob/master/LICENSE */
(function(m,k){"function"===typeof define&&define.amd?define([],k):"object"===typeof exports?module.exports=k():m.brief=k()})(this,function(m,k,r){return function(){var n=[],s=0,c=r.prototype,l=k.prototype,g=c.slice,t=c.splice,d=c.push,u=c.pop,v=c.filter,p=l.matchesSelector||l.msMatchesSelector||l.mozMatchesSelector||l.webkitMatchesSelector||l.oMatchesSelector,f=function(b,a){return new f.prototype.create(b,a)};f.prototype={length:0,isBrief:!0,splice:function(){t.apply(this,g.call(arguments,0));return this},push:function(){d.apply(this,g.call(arguments,0));return this},pop:function(){u.apply(this);return this},toArray:function(){return g.call(this,0)},empty:function(){for(;0<this.length;)this.pop();return this},filter:function(b){var a=v.call(this,function(a){return p.call(a,b)});this.empty();d.apply(this,a);return this},indexOf:function(b){for(var a=0;a<this.length;a++)if(p.call(this[a],b))return a;return-1},get:function(b){return this[b]},find:function(b){var a=[];this.forEach(function(e){d.apply(a,g.call(e.querySelectorAll(b),0))});this.empty();d.apply(this,a);return this},forEach:c.forEach,on:function(b,a,e,q){var h=a,d=this;"boolean"==typeof e&&(q=e,e=void 0);"string"==typeof b&&(b=b.split(" "));q&&(h=function(e){d.off(b,h,!1);a.call(this,e)});b.forEach(function(b){this.forEach(function(c){e?(h=function(c){p.call(c.srcElement,e)&&(q&&d.off(b,a,e),a.call(this,c))},n[s++]={originalCallback:a,createdCallback:h},c.addEventListener(b,h,!0)):c.addEventListener(b,h,!1)})},this)},off:function(b,a,e){"string"==typeof b&&(b=b.split(" "));b.forEach(function(b){this.forEach(function(c){if(e)for(var d=0,g=n.length;d<g;d++){var f=n[d];if(f.originalCallback==a){c.removeEventListener(b,f.createdCallback,!0);n.splice(d,1);break}}else c.removeEventListener(b,a,!1)})},this)},once:function(b,a,c){var d=g.call(arguments,0);d.push(!0);return f.prototype.on.apply(this,d)}};(f.prototype.create=function(b,a){if("string"==typeof a||!a&&b){var c=m.querySelectorAll(this.selector=a||b);d.apply(this,g.call(c,0))}this.selector==a?this.find(b):a&&a.isBrief?d.apply(this,a.find(b)):"object"==typeof a&&(d.apply(this,a.length?a:[a]),this.find(b));return this}).prototype=f.prototype;return f.bind(m)}}(document,Element,Array));