/* brief.js | Copyright 2014 Jeffrey E. Shaver II | Released under the MIT license | https://github.com/jeffshaver/brief.js/blob/master/LICENSE */
(function(l,e){"function"===typeof define&&define.amd?define([],e):"object"===typeof exports?module.exports=e():l.brief=e(document,Element,Array)})(this,function(l,e,h){var r=[];h=h.prototype;e=e.prototype;var q=h.slice,t=h.splice,g=h.push,u=h.pop,v=h.filter,s=e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.oMatchesSelector,w=/^#[\w\d]*$/,x=/^\.[\w\d]*$/,y=/^[\w\d]*$/,c=function(b,a){return new c.prototype.create(b,a)};c.prototype={on:function(){var b=c(),a=arguments[0],d=0,f=a.length;if(a.isBrief||"object"==typeof a)for(;d<f;d++)b.push(a[d]);else b.push(arguments[0]);a=[].slice.call(arguments,1);c.fn.on.apply(b,a)},off:function(){var b=c(),a=arguments[0],d=0,f=a.length;if(a.isBrief||"object"==typeof a)for(;d<f;d++)b.push(a[d]);else b.push(arguments[0]);a=[].slice.call(arguments,1);c.fn.off.apply(b,a)},once:function(){var b=c(),a=arguments[0],d=0,f=a.length;if(a.isBrief||"object"==typeof a)for(;d<f;d++)b.push(a[d]);else b.push(arguments[0]);a=[].slice.call(arguments,1);c.fn.once.apply(b,a)}};e=c.prototype.create=function(b,a){var d;if(b||a){if("string"==typeof a||!a&&b)this.selector=a||b,d=w.test(this.selector)?[l.getElementById(this.selector.substring(1))]:x.test(this.selector)?l.getElementsByClassName(this.selector.substring(1)):y.test(this.selector)?l.getElementsByTagName(this.selector):l.querySelectorAll(this.selector),g.apply(this,q.call(d,0));this.selector==a?this.find(b):a&&a.isBrief?g.apply(this,a.find(b)):"object"==typeof a&&(g.apply(this,a.length?a:[a]),this.find(b))}return this};e.prototype={length:0,isBrief:!0,splice:function(){t.apply(this,q.call(arguments,0));return this},push:function(){for(var b=q.call(arguments,0),a=0,d=b.length,f;a<d;a++)f=b[a],f.isBrief?g.apply(this,f.toArray()):f.length?g.apply(this,f):g.call(this,f);return this},pop:function(){u.apply(this);return this},toArray:function(){return q.call(this,0)},empty:function(){for(;0<this.length;)this.pop();return this},filter:function(b){var a=v.call(this,function(a){return s.call(a,b)});a.selector=this.selector;return a},indexOf:function(b){for(var a=0;a<this.length;a++)if(s.call(this[a],b))return a;return-1},get:function(b){return this[b]},find:function(b){for(var a=c(),d=this.length,f=0;f<d;f++)g.apply(a,q.call(item.querySelectorAll(b),0));a.selector=this.selctor;return a},getChildren:function(){for(var b=c(),a=0;a<this.length;a++)g.apply(b,this[a].children);return b},forEach:function(b){for(var a=0,d=this.length;a<d;a++)b(this[a],a,this);return this},on:function(b,a,d,f){var c=a,e=this,g=e.length,p=0,h=b.length,m,k,n;"boolean"==typeof d&&(f=d,d=void 0);"string"==typeof b&&(b=b.split(" "),h=b.length);for(!d&&f&&(c=function(d){e.off(b,c,!1);a.call(this,d)});p<h;p++)for(n=0,k=b[p],r[k]||(r[k]=[]);n<g;n++)m=e[n],d?(void 0===a.__briefId&&(a.__briefId=r.length,c=function(b){s.call(b.srcElement,d)&&(f&&e.off(k,a,d),a.call(this,b))},c._instances=[],c._originalCallback=a,r[a.__briefId]=c),c._instances.push({element:m,type:k,delegatedTo:d}),m.addEventListener(k,c,!0)):m.addEventListener(k,c,!1)},off:function(b,a,d){var c=0,e=b.length,h=this.length,g,p,l,m,k,n;"string"==typeof b&&(b=b.split(" "),e=b.length);for(;c<e;c++)for(l=0,g=b[c];l<h;l++)if(p=this[l],d)for(k=r[a.__briefId],p.removeEventListener(g,k,!0),n=k._instances,m=n.length;m--;)n[m].element==p&&(n[m].type==g&&n[m].delegatedTo==d)&&k._instances.splice(m,1);else p.removeEventListener(g,a,!1)},once:function(){var b=q.call(arguments,0);b.push(!0);return c.fn.on.apply(this,b)}};c.fn=e.prototype;c.on=c.prototype.on;c.off=c.prototype.off;c.once=c.prototype.once;return c}.bind(this,document,Element,Array));