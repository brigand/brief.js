/* brief.js | Copyright 2014 Jeffrey E. Shaver II | Released under the MIT license | https://github.com/jeffshaver/brief.js/blob/master/LICENSE */
(function(n,e){"function"===typeof define&&define.amd?define([],e):"object"===typeof exports?module.exports=e():n.brief=e(document,Element,Array)})(this,function(n,e,h){var r=[];h=h.prototype;e=e.prototype;var k=h.slice,t=h.splice,g=h.push,u=h.pop,v=h.filter,p=e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.oMatchesSelector,w=/^#[\w\d]*$/,x=/^\.[\w\d]*$/,y=/^[\w\d]*$/,s=function(b){var a;"string"==typeof b&&(a=b.split(" "));return a||k.call(b,0)},d=function(b,a){return new d.prototype.create(b,a)};d.prototype={on:function(){var b=d(),a=arguments[0],c=0,f=a.length;if(a.isBrief||"object"==typeof a)for(;c<f;c++)b.push(a[c]);else b.push(arguments[0]);a=[].slice.call(arguments,1);d.fn.on.apply(b,a)},off:function(){var b=d(),a=arguments[0],c=0,f=a.length;if(a.isBrief||"object"==typeof a)for(;c<f;c++)b.push(a[c]);else b.push(arguments[0]);a=[].slice.call(arguments,1);d.fn.off.apply(b,a)},once:function(){var b=d(),a=arguments[0],c=0,f=a.length;if(a.isBrief||"object"==typeof a)for(;c<f;c++)b.push(a[c]);else b.push(arguments[0]);a=[].slice.call(arguments,1);d.fn.once.apply(b,a)}};e=d.prototype.create=function(b,a){var c;if(b||a){if("string"==typeof a||!a&&b)this.selector=a||b,c=w.test(this.selector)?[n.getElementById(this.selector.substring(1))]:x.test(this.selector)?n.getElementsByClassName(this.selector.substring(1)):y.test(this.selector)?n.getElementsByTagName(this.selector):n.querySelectorAll(this.selector),g.apply(this,k.call(c,0));this.selector==a?this.find(b):a&&a.isBrief?g.apply(this,a.find(b)):"object"==typeof a&&(g.apply(this,a.length?a:[a]),this.find(b))}return this};e.prototype={length:0,isBrief:!0,splice:function(){t.apply(this,k.call(arguments,0));return this},push:function(){for(var b=k.call(arguments,0),a=0,c=b.length,f;a<c;a++)f=b[a],f.isBrief?g.apply(this,f.toArray()):f.length?g.apply(this,f):g.call(this,f);return this},pop:function(){u.apply(this);return this},toArray:function(){return k.call(this,0)},empty:function(){for(;0<this.length;)this.pop();return this},filter:function(b){var a=v.call(this,function(a){return p.call(a,b)});a.selector=this.selector;return a},indexOf:function(b){for(var a=0;a<this.length;a++)if(p.call(this[a],b))return a;return-1},get:function(b){return this[b]},find:function(b){for(var a=d(),c=this.length,f=0;f<c;f++)g.apply(a,k.call(item.querySelectorAll(b),0));a.selector=this.selctor;return a},getChildren:function(){for(var b=d(),a=0;a<this.length;a++)g.apply(b,this[a].children);return b},forEach:function(b){for(var a=0,c=this.length;a<c;a++)b(this[a],a,this);return this},on:function(b,a,c,f){var d=a,e=this,g=0,l,q,m,h,k;"boolean"==typeof c&&(f=c,c=void 0);b=s(b);!c&&f&&(d=function(c){e.off(b,d,!1);a.call(this,c)});c&&(d=r[a.__briefId]||function(b){p.call(b.srcElement,c)&&(f&&e.off(q,a,c),a.call(this,b))});for(h=b.length;g<h;g++)for(m=0,q=b[g],k=e.length;m<k;m++)l=e[m],c?(void 0===a.__briefId&&(a.__briefId=r.length,d._instances=[],d._originalCallback=a,r[a.__briefId]=d),d._instances.push({element:l,type:q,delegatedTo:c}),l.addEventListener(q,d,!0)):l.addEventListener(q,d,!1)},off:function(b,a,c){var d=0,e,g,h,l,k,m,n,p;b=s(b);for(n=b.length;d<n;d++)for(h=0,e=b[d],p=this.length;h<p;h++)if(g=this[h],c)for(k=r[a.__briefId],g.removeEventListener(e,k,!0),m=k._instances,l=m.length;l--;)m[l].element==g&&(m[l].type==e&&m[l].delegatedTo==c)&&k._instances.splice(l,1);else g.removeEventListener(e,a,!1)},once:function(){var b=k.call(arguments,0);b.push(!0);return d.fn.on.apply(this,b)}};d.fn=e.prototype;d.on=d.prototype.on;d.off=d.prototype.off;d.once=d.prototype.once;return d}.bind(this,document,Element,Array));