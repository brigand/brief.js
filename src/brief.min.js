/* brief.js | Copyright 2014 Jeffrey E. Shaver II | Released under the MIT license | https://github.com/jeffshaver/brief.js/blob/master/LICENSE */
(function(m,d,c){var l=[],q=0;c=c.prototype;d=d.prototype;var h=c.slice,r=c.splice,g=c.push,s=c.pop,t=c.filter,n=d.matchesSelector||d.msMatchesSelector||d.mozMatchesSelector||d.webkitMatchesSelector||d.oMatchesSelector,f=function(b,a){return new f.prototype.create(b,a)};f.prototype={length:0,isBrief:!0,splice:function(){r.apply(this,h.call(arguments,0));return this},push:function(){g.apply(this,h.call(arguments,0));return this},pop:function(){s.apply(this);return this},toArray:function(){return h.call(this,0)},empty:function(){for(;0<this.length;)this.pop()},filter:function(b){var a=t.call(this,function(a){return n.call(a,b)});this.empty();g.apply(this,a);return this},indexOf:function(b){for(var a=0;a<this.length;a++)if(n.call(this[a],b))return a;return-1},get:function(b){return this[b]},find:function(b){var a=[];this.forEach(function(e){g.apply(a,h.call(e.querySelectorAll(b),0))});this.empty();g.apply(this,a);return this},forEach:c.forEach,on:function(b,a,e,p){var k=a,c=this;"boolean"==typeof e&&(p=e,e=void 0);b.constructor==String&&(b=b.split(" "));p&&(k=function(e){c.off(b,k,!1);a.call(this,e)});b.forEach(function(b){this.forEach(function(d){e?(k=function(d){n.call(d.srcElement,e)&&(p&&c.off(b,a,e),a.call(this,d))},l[q++]={originalCallback:a,createdCallback:k},d.addEventListener(b,k,!0)):d.addEventListener(b,k,!1)})},this)},off:function(b,a,e){b.constructor==String&&(b=b.split(" "));b.forEach(function(b){this.forEach(function(d){if(e)for(var c=0,g=l.length;c<g;c++){var f=l[c];if(f.originalCallback==a){d.removeEventListener(b,f.createdCallback,!0);l.splice(c,1);break}}else d.removeEventListener(b,a,!1)})},this)},once:function(b,a,d){var c=h.call(arguments,0);c.push(!0);return f.prototype.on.apply(this,c)}};(f.prototype.create=function(b,a){if("string"==typeof a||!a&&b){var c=m.querySelectorAll(this.selector=a||b);g.apply(this,h.call(c,0))}this.selector==a?this.find(b):a&&a.isBrief?g.apply(this,a.find(b)):"object"==typeof a&&(g.apply(this,a.length?a:[a]),this.find(b));return this}).prototype=f.prototype;window.brief=f.bind(m);window.$||(window.$=f.bind(m))})(document,Element,Array);